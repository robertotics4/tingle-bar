{"ast":null,"code":"var _jsxFileName = \"/home/roberto/\\xC1rea de Trabalho/tingle-bar/src/pages/PainelEstabelecimento/pages/GerenciarCardapio/ListaCardapio.jsx\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport Swal from 'sweetalert2';\nimport api from '../../../../services/api';\nimport ModalCadCardapio from './ModalCadCardapio';\nimport ModalVisualizar from './ModalVisualizar';\nexport default function ListaFuncionarios() {\n  const [showModal, setShowModal] = useState(false);\n  const [showModalVisualizar, setModalVisualizar] = useState(false);\n  const [itemSelecionado, setItemSelecionado] = useState(null);\n  const [estabelecimento, setEstabelecimento] = useState(null);\n  const [cardapio, setCardapio] = useState([]);\n  const currencyFormatter = new Intl.NumberFormat('pt-BR', {\n    style: 'currency',\n    currency: 'BRL'\n  });\n  useEffect(() => {\n    async function loadStoragedData() {\n      const storagedEstabelecimento = localStorage.getItem('@TBAuth:estabelecimento');\n\n      if (storagedEstabelecimento) {\n        setEstabelecimento(JSON.parse(storagedEstabelecimento));\n      }\n    }\n\n    loadStoragedData();\n    getCardapio();\n  }, []);\n  useEffect(() => {\n    getCardapio();\n  }, [estabelecimento]);\n\n  async function getCardapio() {\n    try {\n      const response = await api.get('/Cardapio/' + estabelecimento.id_Estabelecimento);\n      setCardapio(response.data);\n      return response.data;\n    } catch (err) {\n      return err.response;\n    }\n  }\n\n  async function handleCadastrar() {\n    setShowModal(true);\n  }\n\n  async function handleVisualizar(item) {\n    setItemSelecionado(item);\n    setModalVisualizar(true);\n  }\n\n  async function deletarItem(item) {\n    Swal.fire({\n      title: 'Deseja deletar o item?',\n      text: \"Após deletar não será possivel recuperar!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#d33',\n      cancelButtonColor: '#3085d6',\n      confirmButtonText: 'Deletar'\n    }).then(async result => {\n      if (result.value) {\n        try {\n          const response = await api.delete('/cardapio/' + item.codigo_item);\n\n          if (response.status === 201 || response.status === 200) {\n            Swal.fire('Sucesso!', 'Item deletado com sucesso!', 'success');\n            getCardapio();\n          }\n        } catch (err) {\n          if (err.response.status === 401 || err.response.status === 400) {\n            Swal.fire('Erro!', 'Falha ao deletar o item', 'error');\n          }\n        }\n      }\n    });\n  }\n\n  function ItensCardapio() {\n    let rows = [];\n\n    if (cardapio) {\n      cardapio.map((obj, objIndex) => {\n        rows.push(obj.itens.map((item, itemIndex) => {\n          return /*#__PURE__*/React.createElement(\"tr\", {\n            key: item.codigo_item,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 28\n            }\n          }, /*#__PURE__*/React.createElement(\"td\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 25\n            }\n          }, item.codigo_item), /*#__PURE__*/React.createElement(\"td\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(\"a\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }\n          }, item.titulo)), /*#__PURE__*/React.createElement(\"td\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(\"a\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }\n          }, obj.categoria)), /*#__PURE__*/React.createElement(\"td\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(\"a\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }\n          }, item.item)), /*#__PURE__*/React.createElement(\"td\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(\"a\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }\n          }, currencyFormatter.format(item.valor))), /*#__PURE__*/React.createElement(\"td\", {\n            className: \"project-actions text-right\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(\"button\", {\n            className: \"btn btn-primary btn-sm ml-3\",\n            onClick: () => handleVisualizar(item),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(\"i\", {\n            className: \"fas fa-eye mr-2\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }\n          }), \"Visualizar\"), /*#__PURE__*/React.createElement(\"button\", {\n            className: \"btn btn-danger btn-sm ml-3\",\n            onClick: () => deletarItem(item),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(\"i\", {\n            className: \"fas fa-trash mr-2\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 33\n            }\n          }), \"Deletar\")));\n        }));\n      });\n      return rows;\n    }\n\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }, \"Card\\xE1pio\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ol\", {\n    className: \"breadcrumb float-sm-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"breadcrumb-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 65\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"breadcrumb-item active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, \"Card\\xE1pio\")))))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, \"Lista de itens do Card\\xE1pio\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-tools\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success btn-sm\",\n    onClick: handleCadastrar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-user-plus mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 37\n    }\n  }), \"Novo\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-striped projects\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: '5%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 41\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: '20%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 41\n    }\n  }, \"T\\xEDtulo\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: '15%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 41\n    }\n  }, \"Categoria\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: '30%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 41\n    }\n  }, \"Descri\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: '10%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 41\n    }\n  }, \"Valor\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: '20%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 41\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 33\n    }\n  }, ItensCardapio())))))), showModal ? /*#__PURE__*/React.createElement(ModalCadCardapio, {\n    idEstabelecimento: estabelecimento.id_Estabelecimento,\n    showModal: showModal,\n    setShowModal: setShowModal,\n    atualizarItens: getCardapio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }) : null, showModalVisualizar ? /*#__PURE__*/React.createElement(ModalVisualizar, {\n    showModal: showModalVisualizar,\n    setShowModal: setModalVisualizar,\n    item: itemSelecionado,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }) : null);\n}","map":{"version":3,"sources":["/home/roberto/Área de Trabalho/tingle-bar/src/pages/PainelEstabelecimento/pages/GerenciarCardapio/ListaCardapio.jsx"],"names":["React","useState","useEffect","useContext","Swal","api","ModalCadCardapio","ModalVisualizar","ListaFuncionarios","showModal","setShowModal","showModalVisualizar","setModalVisualizar","itemSelecionado","setItemSelecionado","estabelecimento","setEstabelecimento","cardapio","setCardapio","currencyFormatter","Intl","NumberFormat","style","currency","loadStoragedData","storagedEstabelecimento","localStorage","getItem","JSON","parse","getCardapio","response","get","id_Estabelecimento","data","err","handleCadastrar","handleVisualizar","item","deletarItem","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","delete","codigo_item","status","ItensCardapio","rows","map","obj","objIndex","push","itens","itemIndex","titulo","categoria","format","valor","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport Swal from 'sweetalert2';\n\nimport api from '../../../../services/api';\nimport ModalCadCardapio from './ModalCadCardapio';\nimport ModalVisualizar from './ModalVisualizar';\n\nexport default function ListaFuncionarios() {\n    const [showModal, setShowModal] = useState(false);\n    const [showModalVisualizar, setModalVisualizar] = useState(false);\n    const [itemSelecionado, setItemSelecionado] = useState(null);\n    const [estabelecimento, setEstabelecimento] = useState(null);\n    const [cardapio, setCardapio] = useState([]);\n\n    const currencyFormatter = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' });\n\n    useEffect(() => {\n        async function loadStoragedData() {\n            const storagedEstabelecimento = localStorage.getItem('@TBAuth:estabelecimento');\n\n            if (storagedEstabelecimento) {\n                setEstabelecimento(JSON.parse(storagedEstabelecimento));\n            }\n        }\n\n        loadStoragedData();\n        getCardapio();\n    }, []);\n\n    useEffect(() => {\n        getCardapio();\n    }, [estabelecimento]);\n\n    async function getCardapio() {\n        try {\n            const response = await api.get('/Cardapio/' + estabelecimento.id_Estabelecimento);\n            setCardapio(response.data);\n            return response.data;\n        } catch (err) {\n            return err.response;\n        }\n    }\n\n    async function handleCadastrar() {\n        setShowModal(true);\n    }\n\n    async function handleVisualizar(item) {\n        setItemSelecionado(item);\n        setModalVisualizar(true);\n    }\n\n    async function deletarItem(item) {\n        Swal.fire({\n            title: 'Deseja deletar o item?',\n            text: \"Após deletar não será possivel recuperar!\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#d33',\n            cancelButtonColor: '#3085d6',\n            confirmButtonText: 'Deletar'\n        }).then(async result => {\n            if (result.value) {\n                try {\n                    const response = await api.delete('/cardapio/' + item.codigo_item);\n\n                    if (response.status === 201 || response.status === 200) {\n                        Swal.fire('Sucesso!', 'Item deletado com sucesso!', 'success');\n                        getCardapio();\n                    }\n                } catch (err) {\n                    if (err.response.status === 401 || err.response.status === 400) {\n                        Swal.fire('Erro!', 'Falha ao deletar o item', 'error');\n                    }\n                }\n            }\n        })\n    }\n\n    function ItensCardapio() {\n        let rows = [];\n\n        if (cardapio) {\n            cardapio.map((obj, objIndex) => {\n                rows.push(obj.itens.map((item, itemIndex) => {\n                    return <tr key={item.codigo_item}>\n                        <td>{item.codigo_item}</td>\n                        <td><a>{item.titulo}</a></td>\n                        <td><a>{obj.categoria}</a></td>\n                        <td><a>{item.item}</a></td>\n                        <td><a>{currencyFormatter.format(item.valor)}</a></td>\n                        <td className=\"project-actions text-right\">\n                            <button className=\"btn btn-primary btn-sm ml-3\" onClick={() => handleVisualizar(item)}>\n                                <i className=\"fas fa-eye mr-2\"></i>\n                            Visualizar\n                            </button>\n                            <button className=\"btn btn-danger btn-sm ml-3\" onClick={() => deletarItem(item)}>\n                                <i className=\"fas fa-trash mr-2\"></i>\n                            Deletar\n                        </button>\n                        </td>\n                    </tr>\n                }))\n            });\n\n            return rows;\n        }\n\n        return null;\n    }\n\n    return (\n        <div className=\"content-wrapper\">\n\n            {/* Content Header (Page header) */}\n            <section className=\"content-header\">\n                <div className=\"container-fluid\">\n                    <div className=\"row mb-2\">\n                        <div className=\"col-sm-6\">\n                            <h1>Cardápio</h1>\n                        </div>\n                        <div className=\"col-sm-6\">\n                            <ol className=\"breadcrumb float-sm-right\">\n                                <li className=\"breadcrumb-item\"><a href=\"#\">Home</a></li>\n                                <li className=\"breadcrumb-item active\">Cardápio</li>\n                            </ol>\n                        </div>\n                    </div>\n                </div>{/* /.container-fluid */}\n            </section>\n\n            {/* Main content */}\n            <section className=\"content\">\n                <div className=\"container-fluid\">\n\n                    <div className=\"card\">\n                        <div className=\"card-header\">\n                            <h3 className=\"card-title\">Lista de itens do Cardápio</h3>\n                            <div className=\"card-tools\">\n                                <button className=\"btn btn-success btn-sm\" onClick={handleCadastrar}>\n                                    <i className=\"fas fa-user-plus mr-2\"></i>\n                                                    Novo\n                                </button>\n                            </div>\n                        </div>\n                        <div className=\"card-body p-0\">\n                            <table className=\"table table-striped projects\">\n                                <thead>\n                                    <tr>\n                                        <th style={{ width: '5%' }}>\n                                            ID\n                                        </th>\n                                        <th style={{ width: '20%' }}>\n                                            Título\n                                        </th>\n                                        <th style={{ width: '15%' }}>\n                                            Categoria\n                                        </th>\n                                        <th style={{ width: '30%' }}>\n                                            Descrição\n                                        </th>\n                                        <th style={{ width: '10%' }}>\n                                            Valor\n                                        </th>\n                                        <th style={{ width: '20%' }}></th>\n                                    </tr>\n                                </thead>\n\n                                <tbody>\n\n                                    {ItensCardapio()}\n\n                                </tbody>\n                            </table>\n                        </div>\n                        {/* /.card-body */}\n\n                    </div>\n\n                </div>\n            </section>\n\n            {showModal\n                ? <ModalCadCardapio\n                    idEstabelecimento={estabelecimento.id_Estabelecimento}\n                    showModal={showModal}\n                    setShowModal={setShowModal}\n                    atualizarItens={getCardapio}\n                />\n                : null\n            }\n\n            {showModalVisualizar\n                ? <ModalVisualizar\n                    showModal={showModalVisualizar}\n                    setShowModal={setModalVisualizar}\n                    item={itemSelecionado}\n                />\n                : null\n            }\n\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}