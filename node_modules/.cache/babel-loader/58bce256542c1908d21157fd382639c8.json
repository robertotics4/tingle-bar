{"ast":null,"code":"import _regeneratorRuntime from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{useForm}from\"react-hook-form\";import Swal from'sweetalert2';import InputMask from'react-input-mask';import{useHistory}from'react-router-dom';import AuthEstabelecimentoContext from'../../contexts/auth-estabelecimento';import Loading from'../../components/Loading';export default function LoginEstabelecimento(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),valores=_useState2[0],setValores=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoadingVisible=_useState4[0],setLoadingVisible=_useState4[1];var _useContext=useContext(AuthEstabelecimentoContext),signIn=_useContext.signIn;var history=useHistory();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;useEffect(function(){},[isLoadingVisible]);var onSubmit=function onSubmit(data){setValores(data);loginEstabelecimento(data);};function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setValores(_objectSpread({},valores,_defineProperty({},name,value)));}function loginEstabelecimento(_x){return _loginEstabelecimento.apply(this,arguments);}function _loginEstabelecimento(){_loginEstabelecimento=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(credentials){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoadingVisible(true);_context.next=3;return signIn(credentials);case 3:response=_context.sent;if(response.status===200||response.status===201){history.push('/painelEstabelecimento');}else if(response.status===401){Swal.fire({title:'Erro!',text:'Usuário ou senha inválidos',icon:'error',confirmButtonText:'Voltar'});}else{Swal.fire({title:'Erro!',text:'Falha ao efetuar login.',icon:'error',confirmButtonText:'Voltar'});}setLoadingVisible(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return _loginEstabelecimento.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"hold-transition login-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-logo\"},/*#__PURE__*/React.createElement(\"a\",{href:\"../../index2.html\"},/*#__PURE__*/React.createElement(\"b\",null,\"Tingle\"),\"Bar\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body login-card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"login-box-msg\"},\"Login de Estabelecimento\"),/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-3\"},/*#__PURE__*/React.createElement(InputMask,{type:\"text\",className:errors.cnpj?\"form-control is-invalid\":\"form-control\",placeholder:\"CNPJ\",name:\"cnpj\",onChange:handleChange,mask:\"99.999.999/9999-99\",ref:register({required:{value:\"Required\",message:\"O CNPJ é obrigatório\"},pattern:{value:/^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/,message:\"CNPJ inválido\"}})}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fas fa-user\"}))),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.cnpj&&errors.cnpj.message)),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-3\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:errors.senha?\"form-control is-invalid\":\"form-control\",placeholder:\"Senha\",name:\"senha\",onChange:handleChange,ref:register({required:{value:\"Required\",message:\"A senha é obrigatória\"},pattern:{value:/(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/,// Mínimo de oito caracteres, pelo menos uma letra e um número\nmessage:\"Mínimo de oito caracteres, com pelo menos uma letra e um número\"}})}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fas fa-lock\"}))),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.senha&&errors.senha.message)),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-3 col-md-12\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\"},\"Acessar\")))),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1\"},/*#__PURE__*/React.createElement(\"a\",{href:\"forgot-password.html\"},\"Esqueci minha senha\")),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/cadastroEstabelecimento\",className:\"text-center\"},\"Cadastrar um novo estabelecimento\"))))),isLoadingVisible?/*#__PURE__*/React.createElement(Loading,null):null);}","map":{"version":3,"sources":["/home/roberto/Área de Trabalho/tingle-bar/src/pages/LoginEstabelecimento/index.jsx"],"names":["React","useState","useEffect","useContext","useForm","Swal","InputMask","useHistory","AuthEstabelecimentoContext","Loading","LoginEstabelecimento","valores","setValores","isLoadingVisible","setLoadingVisible","signIn","history","register","handleSubmit","errors","onSubmit","data","loginEstabelecimento","handleChange","event","target","name","value","credentials","response","status","push","fire","title","text","icon","confirmButtonText","cnpj","required","message","pattern","senha"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport Swal from 'sweetalert2';\nimport InputMask from 'react-input-mask';\nimport { useHistory } from 'react-router-dom';\n\nimport AuthEstabelecimentoContext from '../../contexts/auth-estabelecimento';\nimport Loading from '../../components/Loading';\n\nexport default function LoginEstabelecimento() {\n    const [valores, setValores] = useState({});\n    const [isLoadingVisible, setLoadingVisible] = useState(false);\n    const { signIn } = useContext(AuthEstabelecimentoContext);\n\n    const history = useHistory();\n    const { register, handleSubmit, errors } = useForm();\n\n    useEffect(() => { }, [isLoadingVisible]);\n\n    const onSubmit = data => {\n        setValores(data);\n        loginEstabelecimento(data);\n    };\n\n    function handleChange(event) {\n        const { name, value } = event.target;\n        setValores({ ...valores, [name]: value });\n    }\n\n    async function loginEstabelecimento(credentials) {\n        setLoadingVisible(true);\n\n        const response = await signIn(credentials);\n\n        if (response.status === 200 || response.status === 201) {\n            history.push('/painelEstabelecimento');\n\n        } else if (response.status === 401) {\n            Swal.fire({\n                title: 'Erro!',\n                text: 'Usuário ou senha inválidos',\n                icon: 'error',\n                confirmButtonText: 'Voltar'\n            });\n        } else {\n            Swal.fire({\n                title: 'Erro!',\n                text: 'Falha ao efetuar login.',\n                icon: 'error',\n                confirmButtonText: 'Voltar'\n            });\n        }\n\n        setLoadingVisible(false);\n    }\n\n    return (\n        <div className=\"hold-transition login-page\">\n            <div className=\"login-box\">\n                <div className=\"login-logo\">\n                    <a href=\"../../index2.html\"><b>Tingle</b>Bar</a>\n                </div>\n                {/* /.login-logo */}\n                <div className=\"card\">\n                    <div className=\"card-body login-card-body\">\n                        <p className=\"login-box-msg\">Login de Estabelecimento</p>\n\n                        <form autoComplete=\"off\" onSubmit={handleSubmit(onSubmit)}>\n\n                            <div className=\"input-group mb-3\">\n                                <InputMask\n                                    type=\"text\"\n                                    className={errors.cnpj ? \"form-control is-invalid\" : \"form-control\"}\n                                    placeholder=\"CNPJ\"\n                                    name=\"cnpj\"\n                                    onChange={handleChange}\n                                    mask=\"99.999.999/9999-99\"\n                                    ref={register({\n                                        required: {\n                                            value: \"Required\",\n                                            message: \"O CNPJ é obrigatório\"\n                                        },\n                                        pattern: {\n                                            value: /^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/,\n                                            message: \"CNPJ inválido\"\n                                        }\n                                    })}\n                                />\n                                <div className=\"input-group-append\">\n                                    <div className=\"input-group-text\">\n                                        <span className=\"fas fa-user\" />\n                                    </div>\n                                </div>\n                                <span className=\"error invalid-feedback\">{errors.cnpj && errors.cnpj.message}</span>\n                            </div>\n\n                            <div className=\"input-group mb-3\">\n                                <input\n                                    type=\"password\"\n                                    className={errors.senha ? \"form-control is-invalid\" : \"form-control\"}\n                                    placeholder=\"Senha\"\n                                    name=\"senha\"\n                                    onChange={handleChange}\n                                    ref={register({\n                                        required: {\n                                            value: \"Required\",\n                                            message: \"A senha é obrigatória\"\n                                        },\n                                        pattern: {\n                                            value: /(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/, // Mínimo de oito caracteres, pelo menos uma letra e um número\n                                            message: \"Mínimo de oito caracteres, com pelo menos uma letra e um número\"\n                                        }\n                                    })}\n                                />\n                                <div className=\"input-group-append\">\n                                    <div className=\"input-group-text\">\n                                        <span className=\"fas fa-lock\" />\n                                    </div>\n                                </div>\n                                <span className=\"error invalid-feedback\">{errors.senha && errors.senha.message}</span>\n                            </div>\n\n                            <div className=\"row\">\n                                <div className=\"input-group mb-3 col-md-12\">\n                                    <button type=\"submit\" className=\"btn btn-primary btn-block\">Acessar</button>\n                                </div>\n                                {/* /.col */}\n                            </div>\n                        </form>\n\n                        <p className=\"mb-1\">\n                            <a href=\"forgot-password.html\">Esqueci minha senha</a>\n                        </p>\n                        <p className=\"mb-0\">\n                            <a href=\"/cadastroEstabelecimento\" className=\"text-center\">Cadastrar um novo estabelecimento</a>\n                        </p>\n                    </div>\n                    {/* /.login-card-body */}\n                </div>\n            </div>\n            {/* /.login-box */}\n\n            {isLoadingVisible ? <Loading /> : null}\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}