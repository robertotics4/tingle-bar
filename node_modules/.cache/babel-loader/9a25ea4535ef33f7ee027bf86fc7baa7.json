{"ast":null,"code":"var _jsxFileName = \"/home/roberto/Documentos/tingle-bar/src/pages/Login/Login.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport './Login.css';\nimport Loading from '../../components/Loading';\nimport logo from '../../assets/logo.png';\n\nfunction initialState() {\n  return {\n    user: '',\n    password: ''\n  };\n}\n\nfunction initialUiProps() {\n  return {\n    error: '',\n    loading: false,\n    disabled: false\n  };\n}\n\nasync function authenticate(credentials) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (credentials.usuario === 'admin' && credentials.senha === '1234') resolve({\n        token: 'accessToken',\n        usuario: {\n          id: 1,\n          nome: 'admin'\n        }\n      });else reject({\n        error: 'Falha ao logar'\n      });\n    }, 2000);\n  });\n}\n\nexport default function Login() {\n  const [values, setValues] = useState(initialState);\n  const [uiProps, setUiProps] = useState(initialUiProps);\n  const history = useHistory();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    mode: 'onBlur'\n  });\n  useEffect(() => {\n    setUiProps({ ...uiProps,\n      disabled: uiProps.loading\n    });\n  }, [uiProps.loading]);\n\n  function onChange(event) {\n    const {\n      value,\n      name\n    } = event.target;\n    setValues({ ...values,\n      [name]: value\n    });\n    setUiProps({ ...uiProps,\n      error: ''\n    });\n  }\n\n  async function onSubmit(event) {\n    setUiProps({ ...uiProps,\n      loading: true\n    });\n    const credentials = {\n      usuario: values.user,\n      senha: values.password\n    };\n    const {\n      token,\n      usuario,\n      error\n    } = await authenticate(credentials);\n\n    if (token) {\n      return history.push('/');\n    }\n\n    setUiProps({ ...uiProps,\n      loading: false,\n      error\n    });\n    setValues(initialState);\n  }\n\n  let alert;\n  if (uiProps.error !== '' && uiProps.loading === false) alert = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-alert\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, uiProps.error);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidenav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-main-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    className: \"login-logo\",\n    alt: \"logo-equatorial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"Autentica\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \"Digite seus dados para acessar.\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 col-sm-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }, \"Usu\\xE1rio\"), /*#__PURE__*/React.createElement(\"input\", {\n    ref: register({\n      required: \"Insira seu usuário\"\n    }),\n    disabled: uiProps.disabled,\n    type: \"text\",\n    name: \"user\",\n    className: errors.user ? \"form-control is-invalid\" : \"form-control\",\n    onChange: onChange,\n    value: values.user,\n    placeholder: \"Usu\\xE1rio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  }, errors.user ? errors.user.message : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }, \"Senha\"), /*#__PURE__*/React.createElement(\"input\", {\n    ref: register({\n      required: \"Insira sua senha\"\n    }),\n    disabled: uiProps.disabled,\n    type: \"password\",\n    name: \"password\",\n    className: errors.password ? \"form-control is-invalid\" : \"form-control\",\n    onChange: onChange,\n    value: values.password,\n    placeholder: \"Senha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 33\n    }\n  }, errors.password ? errors.password.message : null)), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: uiProps.disabled,\n    type: \"submit\",\n    className: \"btn btn-black btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, uiProps.loading ? /*#__PURE__*/React.createElement(Loading, {\n    loading: uiProps.loading,\n    message: 'Verificando...',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 52\n    }\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 119\n    }\n  }, \"Efetuar login\")), alert)))));\n}","map":{"version":3,"sources":["/home/roberto/Documentos/tingle-bar/src/pages/Login/Login.js"],"names":["React","useState","useContext","useEffect","useHistory","useForm","Loading","logo","initialState","user","password","initialUiProps","error","loading","disabled","authenticate","credentials","Promise","resolve","reject","setTimeout","usuario","senha","token","id","nome","Login","values","setValues","uiProps","setUiProps","history","register","handleSubmit","errors","mode","onChange","event","value","name","target","onSubmit","push","alert","required","message"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\n\nimport './Login.css';\nimport Loading from '../../components/Loading';\nimport logo from '../../assets/logo.png';\n\nfunction initialState() {\n    return { user: '', password: '' };\n}\n\nfunction initialUiProps() {\n    return {\n        error: '',\n        loading: false,\n        disabled: false\n    };\n}\n\nasync function authenticate(credentials) {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            if (credentials.usuario === 'admin' && credentials.senha === '1234')\n                resolve({ token: 'accessToken', usuario: { id: 1, nome: 'admin' } });\n            else\n                reject({ error: 'Falha ao logar' });\n        }, 2000);\n    });\n}\n\nexport default function Login() {\n    const [values, setValues] = useState(initialState);\n    const [uiProps, setUiProps] = useState(initialUiProps);\n\n    const history = useHistory();\n    const { register, handleSubmit, errors } = useForm({\n        mode: 'onBlur'\n    });\n\n    useEffect(() => {\n        setUiProps({ ...uiProps, disabled: uiProps.loading });\n    }, [uiProps.loading]);\n\n    function onChange(event) {\n        const { value, name } = event.target;\n        setValues({\n            ...values,\n            [name]: value,\n        });\n        setUiProps({ ...uiProps, error: '' });\n    }\n\n    async function onSubmit(event) {\n        setUiProps({ ...uiProps, loading: true });\n\n        const credentials = {\n            usuario: values.user,\n            senha: values.password,\n        };\n\n        const { token, usuario, error } = await authenticate(credentials);\n\n        if (token) {\n            return history.push('/');\n        }\n\n        setUiProps({ ...uiProps, loading: false, error });\n        setValues(initialState);\n    }\n\n    let alert;\n\n    if (uiProps.error !== '' && uiProps.loading === false)\n        alert = <div className=\"login-alert\" role=\"alert\">{uiProps.error}</div>\n\n    return (\n        <div>\n            <div className=\"sidenav\">\n                <div className=\"login-main-text\">\n                    <img src={logo} className=\"login-logo\" alt=\"logo-equatorial\" />\n                    <h2>Autenticação</h2>\n                    <p>Digite seus dados para acessar.</p>\n                </div>\n            </div>\n            <div className=\"main\">\n                <div className=\"col-md-6 col-sm-12\">\n                    <div className=\"login-form\">\n                        <form onSubmit={handleSubmit(onSubmit)} autoComplete=\"off\">\n\n                            <div className=\"form-group\">\n                                <label>Usuário</label>\n                                <input\n                                    ref={register({\n                                        required: \"Insira seu usuário\"\n                                    })}\n                                    disabled={uiProps.disabled}\n                                    type=\"text\"\n                                    name=\"user\"\n                                    className={errors.user ? \"form-control is-invalid\" : \"form-control\"}\n                                    onChange={onChange} value={values.user}\n                                    placeholder=\"Usuário\"\n                                />\n                                <span className=\"invalid-feedback is-invalid\">{errors.user ? errors.user.message : null}</span>\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label>Senha</label>\n                                <input\n                                    ref={register({\n                                        required: \"Insira sua senha\"\n                                    })}\n                                    disabled={uiProps.disabled}\n                                    type=\"password\"\n                                    name=\"password\"\n                                    className={errors.password ? \"form-control is-invalid\" : \"form-control\"}\n                                    onChange={onChange}\n                                    value={values.password}\n                                    placeholder=\"Senha\"\n                                />\n                                <span className=\"invalid-feedback is-invalid\">{errors.password ? errors.password.message : null}</span>\n                            </div>\n\n                            <button disabled={uiProps.disabled} type=\"submit\" className=\"btn btn-black btn-block\">\n                                {uiProps.loading ? <Loading loading={uiProps.loading} message={'Verificando...'} /> : <span>Efetuar login</span>}\n                            </button>\n\n                            {alert}\n\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    );\n}\n"]},"metadata":{},"sourceType":"module"}