{"ast":null,"code":"var _jsxFileName = \"/home/roberto/\\xC1rea de Trabalho/tingle-bar/src/contexts/auth-funcionario.jsx\";\nimport React, { useState, useContext, createContext, useEffect } from 'react';\nimport api from '../services/api';\nimport GeralContext from './geral';\nconst AuthContext = createContext();\nexport const AuthFuncionarioProvider = ({\n  children\n}) => {\n  const [funcionario, setFuncionario] = useState(null);\n  const [estabelecimento, setEstabelecimento] = useState(null);\n  const {\n    setTipoUsuario\n  } = useContext(GeralContext);\n  useEffect(() => {\n    function loadStoragedData() {\n      const storagedFuncionario = localStorage.getItem('@TBAuth:funcionario');\n      const storagedToken = localStorage.getItem('@TBAuth:token');\n      const storagedEstabelecimento = localStorage.getItem('@TBAuth:estabelecimento');\n\n      if (storagedFuncionario && storagedToken && storagedEstabelecimento) {\n        setFuncionario(JSON.parse(storagedFuncionario));\n      }\n    }\n\n    loadStoragedData();\n  }, []);\n\n  async function signIn(credentials) {\n    try {\n      const payload = {\n        \"Telefone\": credentials.telefone,\n        \"Senha\": credentials.senha\n      };\n      const response = await api.post('/api/loginfuncionario', payload);\n      const {\n        accessToken\n      } = response.data;\n      delete response.data.accessToken;\n      setFuncionario(response.data);\n      localStorage.setItem('@TBAuth:funcionario', JSON.stringify(response.data));\n      localStorage.setItem('@TBAuth:token', accessToken);\n      localStorage.setItem('@TBAuth:tipoUsuario', 'funcionario');\n      return response;\n    } catch (err) {\n      return err.response;\n    }\n  }\n\n  function signOut() {\n    localStorage.clear();\n    setTipoUsuario(null);\n    setFuncionario(null);\n  }\n\n  function setEstabelecimentoFuncionario(data) {\n    setEstabelecimento(data);\n    localStorage.setItem('@TBAuth:estabelecimento', JSON.stringify(data));\n  }\n\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      signedFuncionario: !!funcionario,\n      funcionario,\n      signIn,\n      signOut,\n      estabelecimento,\n      setEstabelecimentoFuncionario\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, children);\n};\nexport default AuthContext;","map":{"version":3,"sources":["/home/roberto/Área de Trabalho/tingle-bar/src/contexts/auth-funcionario.jsx"],"names":["React","useState","useContext","createContext","useEffect","api","GeralContext","AuthContext","AuthFuncionarioProvider","children","funcionario","setFuncionario","estabelecimento","setEstabelecimento","setTipoUsuario","loadStoragedData","storagedFuncionario","localStorage","getItem","storagedToken","storagedEstabelecimento","JSON","parse","signIn","credentials","payload","telefone","senha","response","post","accessToken","data","setItem","stringify","err","signOut","clear","setEstabelecimentoFuncionario","signedFuncionario"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,aAAtC,EAAqDC,SAArD,QAAsE,OAAtE;AAEA,OAAOC,GAAP,MAAgB,iBAAhB;AACA,OAAOC,YAAP,MAAyB,SAAzB;AAEA,MAAMC,WAAW,GAAGJ,aAAa,EAAjC;AAEA,OAAO,MAAMK,uBAAuB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AACrD,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCV,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAM,CAACW,eAAD,EAAkBC,kBAAlB,IAAwCZ,QAAQ,CAAC,IAAD,CAAtD;AACA,QAAM;AAAEa,IAAAA;AAAF,MAAqBZ,UAAU,CAACI,YAAD,CAArC;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACZ,aAASW,gBAAT,GAA4B;AACxB,YAAMC,mBAAmB,GAAGC,YAAY,CAACC,OAAb,CAAqB,qBAArB,CAA5B;AACA,YAAMC,aAAa,GAAGF,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAtB;AACA,YAAME,uBAAuB,GAAGH,YAAY,CAACC,OAAb,CAAqB,yBAArB,CAAhC;;AAEA,UAAIF,mBAAmB,IAAIG,aAAvB,IAAwCC,uBAA5C,EAAqE;AACjET,QAAAA,cAAc,CAACU,IAAI,CAACC,KAAL,CAAWN,mBAAX,CAAD,CAAd;AACH;AACJ;;AAEDD,IAAAA,gBAAgB;AACnB,GAZQ,EAYN,EAZM,CAAT;;AAcA,iBAAeQ,MAAf,CAAsBC,WAAtB,EAAmC;AAC/B,QAAI;AACA,YAAMC,OAAO,GAAG;AACZ,oBAAYD,WAAW,CAACE,QADZ;AAEZ,iBAASF,WAAW,CAACG;AAFT,OAAhB;AAKA,YAAMC,QAAQ,GAAG,MAAMvB,GAAG,CAACwB,IAAJ,CAAS,uBAAT,EAAkCJ,OAAlC,CAAvB;AAEA,YAAM;AAAEK,QAAAA;AAAF,UAAkBF,QAAQ,CAACG,IAAjC;AACA,aAAOH,QAAQ,CAACG,IAAT,CAAcD,WAArB;AAEAnB,MAAAA,cAAc,CAACiB,QAAQ,CAACG,IAAV,CAAd;AACAd,MAAAA,YAAY,CAACe,OAAb,CAAqB,qBAArB,EAA4CX,IAAI,CAACY,SAAL,CAAeL,QAAQ,CAACG,IAAxB,CAA5C;AACAd,MAAAA,YAAY,CAACe,OAAb,CAAqB,eAArB,EAAsCF,WAAtC;AACAb,MAAAA,YAAY,CAACe,OAAb,CAAqB,qBAArB,EAA4C,aAA5C;AAEA,aAAOJ,QAAP;AACH,KAjBD,CAiBE,OAAOM,GAAP,EAAY;AACV,aAAOA,GAAG,CAACN,QAAX;AACH;AACJ;;AAED,WAASO,OAAT,GAAmB;AACflB,IAAAA,YAAY,CAACmB,KAAb;AACAtB,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAH,IAAAA,cAAc,CAAC,IAAD,CAAd;AACH;;AAED,WAAS0B,6BAAT,CAAuCN,IAAvC,EAA6C;AACzClB,IAAAA,kBAAkB,CAACkB,IAAD,CAAlB;AACAd,IAAAA,YAAY,CAACe,OAAb,CAAqB,yBAArB,EAAgDX,IAAI,CAACY,SAAL,CAAeF,IAAf,CAAhD;AACH;;AAED,sBACI,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEO,MAAAA,iBAAiB,EAAE,CAAC,CAAC5B,WAAvB;AAAoCA,MAAAA,WAApC;AAAiDa,MAAAA,MAAjD;AAAyDY,MAAAA,OAAzD;AAAkEvB,MAAAA,eAAlE;AAAmFyB,MAAAA;AAAnF,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK5B,QADL,CADJ;AAKH,CA1DM;AA4DP,eAAeF,WAAf","sourcesContent":["import React, { useState, useContext, createContext, useEffect } from 'react';\n\nimport api from '../services/api';\nimport GeralContext from './geral';\n\nconst AuthContext = createContext();\n\nexport const AuthFuncionarioProvider = ({ children }) => {\n    const [funcionario, setFuncionario] = useState(null);\n    const [estabelecimento, setEstabelecimento] = useState(null);\n    const { setTipoUsuario } = useContext(GeralContext);\n\n    useEffect(() => {\n        function loadStoragedData() {\n            const storagedFuncionario = localStorage.getItem('@TBAuth:funcionario');\n            const storagedToken = localStorage.getItem('@TBAuth:token');\n            const storagedEstabelecimento = localStorage.getItem('@TBAuth:estabelecimento');\n\n            if (storagedFuncionario && storagedToken && storagedEstabelecimento) {\n                setFuncionario(JSON.parse(storagedFuncionario));\n            }\n        }\n\n        loadStoragedData();\n    }, []);\n\n    async function signIn(credentials) {\n        try {\n            const payload = {\n                \"Telefone\": credentials.telefone,\n                \"Senha\": credentials.senha\n            }\n\n            const response = await api.post('/api/loginfuncionario', payload);\n\n            const { accessToken } = response.data;\n            delete response.data.accessToken;\n\n            setFuncionario(response.data);\n            localStorage.setItem('@TBAuth:funcionario', JSON.stringify(response.data));\n            localStorage.setItem('@TBAuth:token', accessToken);\n            localStorage.setItem('@TBAuth:tipoUsuario', 'funcionario');\n\n            return response;\n        } catch (err) {\n            return err.response;\n        }\n    }\n\n    function signOut() {\n        localStorage.clear();\n        setTipoUsuario(null);\n        setFuncionario(null);\n    }\n\n    function setEstabelecimentoFuncionario(data) {\n        setEstabelecimento(data);\n        localStorage.setItem('@TBAuth:estabelecimento', JSON.stringify(data));\n    }\n\n    return (\n        <AuthContext.Provider value={{ signedFuncionario: !!funcionario, funcionario, signIn, signOut, estabelecimento, setEstabelecimentoFuncionario }}>\n            {children}\n        </AuthContext.Provider>\n    )\n};\n\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}