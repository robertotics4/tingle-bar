{"ast":null,"code":"var _jsxFileName = \"/home/roberto/\\xC1rea de Trabalho/tingle-bar/src/pages/PainelEstabelecimento/pages/GerenciarMesas/ListaMesas.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport api from '../../../../services/api';\nexport default function ListaMesas() {\n  const [estabelecimento, setEstabelecimento] = useState(null);\n  const [mesas, setMesas] = useState([]);\n  useEffect(() => {\n    async function loadStoragedData() {\n      const storagedEstabelecimento = localStorage.getItem('@TBAuth:estabelecimento');\n\n      if (storagedEstabelecimento) {\n        setEstabelecimento(JSON.parse(storagedEstabelecimento));\n      }\n    }\n\n    loadStoragedData();\n    getMesas();\n  }, []);\n  useEffect(() => {\n    getMesas();\n  }, [estabelecimento]);\n\n  async function getMesas() {\n    try {\n      const response = await api.get('/Mesa?idEstabelecimento=' + estabelecimento.id_Estabelecimento);\n      setMesas(response.data);\n    } catch (err) {\n      return err.response;\n    }\n  }\n\n  async function deletarMesas(item) {\n    Swal.fire({\n      html: `<h3>Deseja excluir a mesa <strong>${item.descricao}</strong>?</h3>`,\n      text: \"Após deletar não será possivel recuperar!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#d33',\n      cancelButtonColor: '#3085d6',\n      confirmButtonText: 'Deletar'\n    }).then(async result => {\n      if (result.value) {\n        try {\n          const response = await api.delete('/mesa/' + item.id);\n\n          if (response.status === 201 || response.status === 200) {\n            Swal.fire('Sucesso!', 'Mesa deletada com sucesso!', 'success');\n            getMesas();\n          }\n        } catch (err) {\n          if (err.response.status === 401 || err.response.status === 400) {\n            Swal.fire('Erro!', 'Falha ao deletar a mesa', 'error');\n          }\n        }\n      }\n    });\n  }\n\n  async function alterarMesas(item) {\n    const {\n      value\n    } = Swal.fire({\n      title: 'Digite a descrição da mesa',\n      input: 'text',\n      inputPlaceholder: 'Descrição da mesa',\n      inputValidator: value => {\n        if (!value) {\n          return 'Favor digitar a Descrição da mesa!';\n        }\n      },\n      showCancelButton: true\n    }).then(async result => {\n      if (result.value) {\n        const payload = {\n          \"id\": item.id,\n          \"Descricao\": result.value,\n          \"fk_id_estabelecimento\": estabelecimento.id_Estabelecimento\n        };\n\n        try {\n          const response = await api.put('/Mesa', payload);\n\n          if (response.status === 201 || response.status === 200) {\n            Swal.fire('Sucesso!', 'Mesa alterada com sucesso!', 'success');\n            getMesas();\n          }\n        } catch (err) {\n          if (err.response.status === 401 || err.response.status === 400) {\n            Swal.fire('Erro!', 'Falha ao alterar mesa', 'error');\n          }\n        }\n      }\n    });\n  }\n\n  async function cadastrarMesas() {\n    const {\n      value\n    } = Swal.fire({\n      title: 'Digite a descrição da mesa',\n      input: 'text',\n      inputPlaceholder: 'Descrição da mesa',\n      inputValidator: value => {\n        if (!value) {\n          return 'Favor digitar a Descrição da mesa!';\n        }\n      },\n      showCancelButton: true\n    }).then(async result => {\n      if (result.value) {\n        const payload = {\n          \"Descricao\": result.value,\n          \"fk_id_estabelecimento\": estabelecimento.id_Estabelecimento\n        };\n\n        try {\n          const response = await api.post('/Mesa', payload);\n\n          if (response.status === 201 || response.status === 200) {\n            Swal.fire('Sucesso!', 'Mesa cadastrada com sucesso!', 'success');\n            getMesas();\n          }\n        } catch (err) {\n          if (err.response.status === 401 || err.response.status === 400) {\n            Swal.fire('Erro!', 'Falha ao cadastrar mesa', 'error');\n          }\n        }\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"content-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, \"Mesas\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ol\", {\n    className: \"breadcrumb float-sm-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"breadcrumb-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 65\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"breadcrumb-item active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 33\n    }\n  }, \"Mesas\")))))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 29\n    }\n  }, \"Lista de Mesas\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-tools\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success btn-sm\",\n    onClick: cadastrarMesas,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-user-plus mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 37\n    }\n  }), \"Novo\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-striped projects\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: '10%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 41\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: '40%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 41\n    }\n  }, \"Nome\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 33\n    }\n  }, mesas.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 48\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 45\n      }\n    }, item.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 45\n      }\n    }, item.descricao), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"project-actions text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info btn-sm ml-3\",\n      onClick: () => alterarMesas(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-pencil-alt mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 53\n      }\n    }), \"Editar\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger btn-sm ml-3\",\n      onClick: () => deletarMesas(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-trash mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 53\n      }\n    }), \"Deletar\")));\n  }))))))));\n}","map":{"version":3,"sources":["/home/roberto/Área de Trabalho/tingle-bar/src/pages/PainelEstabelecimento/pages/GerenciarMesas/ListaMesas.jsx"],"names":["React","useState","useEffect","Swal","api","ListaMesas","estabelecimento","setEstabelecimento","mesas","setMesas","loadStoragedData","storagedEstabelecimento","localStorage","getItem","JSON","parse","getMesas","response","get","id_Estabelecimento","data","err","deletarMesas","item","fire","html","descricao","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","delete","id","status","alterarMesas","title","input","inputPlaceholder","inputValidator","payload","put","cadastrarMesas","post","width","map","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\n\nimport api from '../../../../services/api';\n\nexport default function ListaMesas() {\n    const [estabelecimento, setEstabelecimento] = useState(null);\n    const [mesas, setMesas] = useState([]);\n\n\n    useEffect(() => {\n        async function loadStoragedData() {\n            const storagedEstabelecimento = localStorage.getItem('@TBAuth:estabelecimento');\n\n            if (storagedEstabelecimento) {\n                setEstabelecimento(JSON.parse(storagedEstabelecimento));\n            }\n        }\n        loadStoragedData();\n        getMesas();\n    }, []);\n\n    useEffect(() => {\n        getMesas();\n    }, [estabelecimento]);\n\n    async function getMesas() {\n        try {\n            const response = await api.get('/Mesa?idEstabelecimento=' + estabelecimento.id_Estabelecimento);\n            setMesas(response.data);\n        } catch (err) {\n            return err.response;\n        }\n    }\n\n    async function deletarMesas(item) {\n        Swal.fire({\n            html: `<h3>Deseja excluir a mesa <strong>${item.descricao}</strong>?</h3>`,\n            text: \"Após deletar não será possivel recuperar!\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#d33',\n            cancelButtonColor: '#3085d6',\n            confirmButtonText: 'Deletar'\n        }).then(async result => {\n            if (result.value) {\n                try {\n                    const response = await api.delete('/mesa/' + item.id);\n\n                    if (response.status === 201 || response.status === 200) {\n                        Swal.fire('Sucesso!', 'Mesa deletada com sucesso!', 'success');\n                        getMesas();\n                    }\n                } catch (err) {\n                    if (err.response.status === 401 || err.response.status === 400) {\n                        Swal.fire('Erro!', 'Falha ao deletar a mesa', 'error');\n                    }\n                }\n            }\n        })\n    }\n\n    async function alterarMesas(item) {\n        const { value } = Swal.fire({\n            title: 'Digite a descrição da mesa',\n            input: 'text',\n            inputPlaceholder: 'Descrição da mesa',\n            inputValidator: (value) => {\n                if (!value) {\n                    return 'Favor digitar a Descrição da mesa!'\n                }\n            },\n            showCancelButton: true\n        }).then(async result => {\n            if (result.value) {\n                const payload = {\n                    \"id\": item.id,\n                    \"Descricao\": result.value,\n                    \"fk_id_estabelecimento\": estabelecimento.id_Estabelecimento\n                }\n                try {\n                    const response = await api.put('/Mesa', payload)\n                    if (response.status === 201 || response.status === 200) {\n                        Swal.fire('Sucesso!', 'Mesa alterada com sucesso!', 'success')\n                        getMesas();\n                    }\n                } catch (err) {\n                    if (err.response.status === 401 || err.response.status === 400) {\n                        Swal.fire('Erro!', 'Falha ao alterar mesa', 'error')\n                    }\n                }\n            }\n        })\n    }\n\n    async function cadastrarMesas() {\n        const { value } = Swal.fire({\n            title: 'Digite a descrição da mesa',\n            input: 'text',\n            inputPlaceholder: 'Descrição da mesa',\n            inputValidator: (value) => {\n                if (!value) {\n                    return 'Favor digitar a Descrição da mesa!'\n                }\n            },\n            showCancelButton: true\n        }).then(async result => {\n            if (result.value) {\n                const payload = {\n                    \"Descricao\": result.value,\n                    \"fk_id_estabelecimento\": estabelecimento.id_Estabelecimento\n                }\n                try {\n                    const response = await api.post('/Mesa', payload);\n\n                    if (response.status === 201 || response.status === 200) {\n                        Swal.fire('Sucesso!', 'Mesa cadastrada com sucesso!', 'success')\n                        getMesas();\n                    }\n                } catch (err) {\n                    if (err.response.status === 401 || err.response.status === 400) {\n                        Swal.fire('Erro!', 'Falha ao cadastrar mesa', 'error')\n                    }\n                }\n            }\n        })\n    }\n\n    return (\n        <div className=\"content-wrapper\">\n\n            {/* Content Header (Page header) */}\n            <section className=\"content-header\">\n                <div className=\"container-fluid\">\n                    <div className=\"row mb-2\">\n                        <div className=\"col-sm-6\">\n                            <h1>Mesas</h1>\n                        </div>\n                        <div className=\"col-sm-6\">\n                            <ol className=\"breadcrumb float-sm-right\">\n                                <li className=\"breadcrumb-item\"><a href=\"#\">Home</a></li>\n                                <li className=\"breadcrumb-item active\">Mesas</li>\n                            </ol>\n                        </div>\n                    </div>\n                </div>{/* /.container-fluid */}\n            </section>\n\n            {/* Main content */}\n            <section className=\"content\">\n                <div className=\"container-fluid\">\n                    <div className=\"card\">\n                        <div className=\"card-header\">\n                            <h3 className=\"card-title\">Lista de Mesas</h3>\n                            <div className=\"card-tools\">\n                                <button className=\"btn btn-success btn-sm\" onClick={cadastrarMesas}>\n                                    <i className=\"fas fa-user-plus mr-2\"></i>\n                                                    Novo\n                                </button>\n                            </div>\n                        </div>\n                        <div className=\"card-body p-0\">\n                            <table className=\"table table-striped projects\">\n                                <thead>\n                                    <tr>\n                                        <th style={{ width: '10%' }}>\n                                            ID\n                                        </th>\n                                        <th style={{ width: '40%' }}>\n                                            Nome\n                                        </th>\n                                    </tr>\n                                </thead>\n\n                                <tbody>\n\n                                    {mesas.map((item, index) => {\n                                        return <tr key={item.id}>\n                                            <td>{item.id}</td>\n                                            <td>{item.descricao}</td>\n\n                                            <td className=\"project-actions text-right\">\n\n                                                <button className=\"btn btn-info btn-sm ml-3\" onClick={() => alterarMesas(item)}>\n                                                    <i className=\"fas fa-pencil-alt mr-2\"></i>\n                                                    Editar\n                                                </button>\n                                                <button className=\"btn btn-danger btn-sm ml-3\" onClick={() => deletarMesas(item)}>\n                                                    <i className=\"fas fa-trash mr-2\"></i>\n                                                    Deletar\n                                                </button>\n\n                                            </td>\n                                        </tr>\n                                    })}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}