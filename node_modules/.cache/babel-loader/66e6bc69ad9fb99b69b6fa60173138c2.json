{"ast":null,"code":"import _defineProperty from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/roberto/\\xC1rea de Trabalho/tingle-bar/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useForm}from\"react-hook-form\";import Swal from'sweetalert2';import InputMask from'react-input-mask';import'./CadastroEstabelecimento.css';import Loading from'../../components/Loading';import api from'../../services/api';export default function CadastroEstabelecimento(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),valores=_useState2[0],setValores=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tiposEstabelecimento=_useState4[0],setTiposEstabelecimento=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoadingVisible=_useState6[0],setLoadingVisible=_useState6[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors,watch=_useForm.watch;var onSubmit=function onSubmit(data){setValores(data);console.log(valores);cadastrarEstabelecimento();};useEffect(function(){},[isLoadingVisible]);useEffect(function(){function getTiposEstabelecimento(){return _getTiposEstabelecimento.apply(this,arguments);}function _getTiposEstabelecimento(){_getTiposEstabelecimento=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$api$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get('/tipoestabelecimento');case 3:_yield$api$get=_context.sent;data=_yield$api$get.data;setTiposEstabelecimento(data.tipoestabelecimento);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log({err:_context.t0});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _getTiposEstabelecimento.apply(this,arguments);}getTiposEstabelecimento();},[]);function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setValores(_objectSpread({},valores,_defineProperty({},name,value)));}function cadastrarEstabelecimento(){return _cadastrarEstabelecimento.apply(this,arguments);}function _cadastrarEstabelecimento(){_cadastrarEstabelecimento=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var resposta,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoadingVisible(true);resposta=null;payload={\"Nome\":valores.nome,\"Cnpj\":valores.cnpj,\"Endereco\":valores.endereco,\"Numero\":valores.numero,\"Latitude\":valores.latitude,\"Longitude\":valores.longitude,\"IdTipoEstabelecimento\":valores.tipoEstabelecimento,\"Imagem\":\"/uploads/default.png\",\"Distancia_km\":\"0\",\"Senha\":valores.senha};_context2.prev=3;_context2.next=6;return api.post('/estabelecimento',payload);case 6:resposta=_context2.sent;if(resposta.status===200||resposta.status===201){Swal.fire({title:'Sucesso!',text:'Cadastro efetuado com sucesso!',icon:'success',confirmButtonText:'OK'});setValores({});}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);Swal.fire({title:'Erro!',text:'Falha ao efetuar cadastro.',icon:'error',confirmButtonText:'Voltar'});case 13:_context2.prev=13;setLoadingVisible(false);return _context2.finish(13);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[3,10,13,16]]);}));return _cadastrarEstabelecimento.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"hold-transition register-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"register-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"register-logo\"},/*#__PURE__*/React.createElement(\"a\",{href:\"../../index2.html\"},/*#__PURE__*/React.createElement(\"b\",null,\"Tingle\"),\"Bar\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body register-card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"login-box-msg\"},\"Cadastrar novo estabelecimento\"),/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{name:\"nome\",placeholder:\"Nome do estabelecimento\",className:errors.nome?\"form-control is-invalid\":\"form-control\",type:\"text\",onChange:handleChange,ref:register({required:{value:\"Required\",message:\"O nome do estabelecimento é obrigatório\"}})}),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.nome&&errors.nome.message))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-10\"},/*#__PURE__*/React.createElement(\"input\",{name:\"endereco\",placeholder:\"Endere\\xE7o\",className:errors.endereco?\"form-control is-invalid\":\"form-control\",type:\"text\",onChange:handleChange,ref:register({required:{value:\"Required\",message:\"O endereço é obrigatório\"}})}),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.endereco&&errors.endereco.message)),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-2\"},/*#__PURE__*/React.createElement(\"input\",{name:\"numero\",placeholder:\"N\\xBA\",className:errors.numero?\"form-control is-invalid\":\"form-control\",type:\"text\",onChange:handleChange,ref:register({required:{value:\"Required\",message:\"O número é obrigatório\"},maxLength:{value:5,message:\"Limite de 5 caracteres\"}})}),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.numero&&errors.numero.message))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-12\"},/*#__PURE__*/React.createElement(InputMask,{type:\"text\",placeholder:\"CNPJ\",className:errors.cnpj?\"form-control is-invalid\":\"form-control\",name:\"cnpj\",onChange:handleChange,mask:\"99.999.999/9999-99\",ref:register({required:{value:\"Required\",message:\"O CNPJ é obrigatório\"},pattern:{value:/^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/,message:\"CNPJ inválido\"}})}),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.cnpj&&errors.cnpj.message))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-12\"},/*#__PURE__*/React.createElement(\"select\",{className:errors.tipoEstabelecimento?\"form-control is-invalid\":\"form-control\",onChange:handleChange,name:\"tipoEstabelecimento\",ref:register({required:{value:\"Required\",message:\"O tipo de estabelecimento é obrigatório\"}})},/*#__PURE__*/React.createElement(\"option\",{key:0,value:\"\"},\"Tipo de estabelecimento\"),tiposEstabelecimento.map(function(tipoEstabelecimento,index){return/*#__PURE__*/React.createElement(\"option\",{key:tipoEstabelecimento.id,value:tipoEstabelecimento.id},tipoEstabelecimento.descricao);})),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.tipoEstabelecimento&&errors.tipoEstabelecimento.message))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-6\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Latitude\",name:\"latitude\",onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-6\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Longitude\",name:\"longitude\",onChange:handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:errors.senha?\"form-control is-invalid\":\"form-control\",placeholder:\"Senha\",name:\"senha\",onChange:handleChange,ref:register({required:{value:\"Required\",message:\"A senha é obrigatória\"},pattern:{value:/(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/,// Mínimo de oito caracteres, pelo menos uma letra e um número\nmessage:\"Mínimo de oito caracteres, com pelo menos uma letra e um número\"}})}),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.senha&&errors.senha.message))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:errors.repeticaoSenha?\"form-control is-invalid\":\"form-control\",placeholder:\"Redigite a senha\",name:\"repeticaoSenha\",onChange:handleChange,ref:register({required:{value:\"Required\",message:\"A repetição de senha é obrigatória\"},validate:function validate(value){return value===watch('senha')||\"As senhas não coincidem\";}})}),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\"},errors.repeticaoSenha&&errors.repeticaoSenha.message))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icheck-primary\"},/*#__PURE__*/React.createElement(\"input\",{className:errors.aceitaTermos?\"\":\"\",type:\"checkbox\",defaultChecked:false,name:\"aceitaTermos\",defaultValue:true,ref:register({required:{value:\"Required\",message:\"Aceite os termos para continuar\"}})}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"agreeTerms\"},\"\\xA0\\xA0Eu aceito todos os \",/*#__PURE__*/React.createElement(\"a\",{\"data-toggle\":\"modal\",\"data-target\":\"#modaltermo\",href:\"#\"},\"termos de uso\")),/*#__PURE__*/React.createElement(\"span\",{className:\"error invalid-feedback\",style:{display:\"inline\"}},/*#__PURE__*/React.createElement(\"br\",null),errors.aceitaTermos&&errors.aceitaTermos.message)))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2 col-12\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\"},\"Cadastrar\")))),/*#__PURE__*/React.createElement(\"a\",{href:\"/\",className:\"text-center\"},\"J\\xE1 tenho uma conta de acesso\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal fade\",id:\"modaltermo\",tabIndex:-1,role:\"dialog\",\"aria-labelledby\":\"exampleModalLongTitle\",\"aria-hidden\":\"true\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-dialog\",role:\"document\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"modal-title\",id:\"exampleModalLongTitle\"},\"Termo de Uso\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body\"},\"A pol\\xEDtica de privacidade \\xE9 o documento por meio do qual a pessoa f\\xEDsica ou jur\\xEDdica que mant\\xE9m um site ou aplicativo exp\\xF5e e explica a todos os interessados a forma como os dados pessoais dos usu\\xE1rios da plataforma ser\\xE3o tratados. A prote\\xE7\\xE3o de dados pessoais ganhou especial relev\\xE2ncia ap\\xF3s a entrada em vigor do Regulamento Geral de Prote\\xE7\\xE3o de Dados da Uni\\xE3o Europeia (RGPD), tamb\\xE9m conhecido como General Data Protection Regulation (GDPR), que \\xE9 o regulamento adotado pelos pa\\xEDses da Uni\\xE3o Europeia sobre o assunto. Esta norma estabeleceu uma s\\xE9rie de exig\\xEAncias e de puni\\xE7\\xF5es \\xE0queles que realizam o tratamento de dados pessoais de usu\\xE1rios da internet. A ado\\xE7\\xE3o do RGPD pela Uni\\xE3o Europeia levou o Brasil a adotar uma legisla\\xE7\\xE3o muito semelhante, que tamb\\xE9m trata do assunto: a Lei Federal n. 13.709 (Lei de Prote\\xE7\\xE3o de Dados Pessoais). Vale ressaltar, neste ponto, que, ainda que a pessoa f\\xEDsica ou jur\\xEDdica respons\\xE1vel pelo site ou aplicativo seja brasileira, \\xE9 poss\\xEDvel que se lhe apliquem ambas as normas, a depender do caso. As duas normas estabelecem regras que devem ser seguidas pelos sites ou aplicativos que fazem a coleta e o tratamento de dados pessoais de seus usu\\xE1rios. Al\\xE9m disso, os usu\\xE1rios dever\\xE3o ter seus direitos respeitados, como os de acesso, limita\\xE7\\xE3o, elimina\\xE7\\xE3o, retifica\\xE7\\xE3o e portabilidade de seus dados pessoais. O site ou aplicativo dever\\xE1 informar os motivos pelos quais os dados pessoais de seus usu\\xE1rios s\\xE3o coletados, a pessoa respons\\xE1vel pelo tratamento destes dados e o prazo pelo qual s\\xE3o armazenados. Caber\\xE1 ao site ou aplicativo, ainda, informar aos usu\\xE1rios os seus direitos, sendo que todas estas informa\\xE7\\xF5es estar\\xE3o previstas na pol\\xEDtica de privacidade. No documento, ser\\xE1 necess\\xE1rio, ainda, designar um profissional especializado em privacidade para verificar se o site ou aplicativo est\\xE1 cumprindo as normas do regulamento, o chamado Encarregado de Prote\\xE7\\xE3o de Dados (Data Protection Officer).\"),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-footer\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-dismiss\":\"modal\"},\"Fechar\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\"},\"Aceito\"))))),isLoadingVisible?/*#__PURE__*/React.createElement(Loading,null):null);}","map":{"version":3,"sources":["/home/roberto/Área de Trabalho/tingle-bar/src/pages/CadastroEstabelecimento/index.jsx"],"names":["React","useState","useEffect","useForm","Swal","InputMask","Loading","api","CadastroEstabelecimento","valores","setValores","tiposEstabelecimento","setTiposEstabelecimento","isLoadingVisible","setLoadingVisible","register","handleSubmit","errors","watch","onSubmit","data","console","log","cadastrarEstabelecimento","getTiposEstabelecimento","get","tipoestabelecimento","err","handleChange","event","target","name","value","resposta","payload","nome","cnpj","endereco","numero","latitude","longitude","tipoEstabelecimento","senha","post","status","fire","title","text","icon","confirmButtonText","required","message","maxLength","pattern","map","index","id","descricao","repeticaoSenha","validate","aceitaTermos","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport Swal from 'sweetalert2';\nimport InputMask from 'react-input-mask';\n\nimport './CadastroEstabelecimento.css';\nimport Loading from '../../components/Loading';\n\nimport api from '../../services/api';\n\nexport default function CadastroEstabelecimento() {\n    const [valores, setValores] = useState({});\n    const [tiposEstabelecimento, setTiposEstabelecimento] = useState([]);\n    const [isLoadingVisible, setLoadingVisible] = useState(false);\n\n    const { register, handleSubmit, errors, watch } = useForm();\n\n    const onSubmit = data => {\n        setValores(data);\n        console.log(valores);\n        cadastrarEstabelecimento();\n    };\n\n    useEffect(() => { }, [isLoadingVisible]);\n\n    useEffect(() => {\n        async function getTiposEstabelecimento() {\n            try {\n                const { data } = await api.get('/tipoestabelecimento');\n                setTiposEstabelecimento(data.tipoestabelecimento);\n            } catch (err) {\n                console.log({ err });\n            }\n        }\n\n        getTiposEstabelecimento();\n    }, []);\n\n    function handleChange(event) {\n        const { name, value } = event.target;\n        setValores({ ...valores, [name]: value });\n    }\n\n    async function cadastrarEstabelecimento() {\n        setLoadingVisible(true);\n        let resposta = null;\n\n        const payload = {\n            \"Nome\": valores.nome,\n            \"Cnpj\": valores.cnpj,\n            \"Endereco\": valores.endereco,\n            \"Numero\": valores.numero,\n            \"Latitude\": valores.latitude,\n            \"Longitude\": valores.longitude,\n            \"IdTipoEstabelecimento\": valores.tipoEstabelecimento,\n            \"Imagem\": \"/uploads/default.png\",\n            \"Distancia_km\": \"0\",\n            \"Senha\": valores.senha\n        }\n\n        try {\n            resposta = await api.post('/estabelecimento', payload);\n\n            if (resposta.status === 200 || resposta.status === 201) {\n                Swal.fire({\n                    title: 'Sucesso!',\n                    text: 'Cadastro efetuado com sucesso!',\n                    icon: 'success',\n                    confirmButtonText: 'OK'\n                });\n\n                setValores({});\n            }\n\n        } catch (err) {\n            Swal.fire({\n                title: 'Erro!',\n                text: 'Falha ao efetuar cadastro.',\n                icon: 'error',\n                confirmButtonText: 'Voltar'\n            });\n        } finally {\n            setLoadingVisible(false);\n        }\n    }\n\n    return (\n        <div className=\"hold-transition register-page\">\n            <div className=\"register-box\">\n                <div className=\"register-logo\">\n                    <a href=\"../../index2.html\"><b>Tingle</b>Bar</a>\n                </div>\n\n                <div className=\"card\">\n                    <div className=\"card-body register-card-body\">\n                        <p className=\"login-box-msg\">Cadastrar novo estabelecimento</p>\n\n                        <form autoComplete=\"off\" onSubmit={handleSubmit(onSubmit)}>\n\n                            <div className=\"row\">\n                                <div className=\"mb-3 col-md-12\">\n                                    <input\n                                        name=\"nome\"\n                                        placeholder=\"Nome do estabelecimento\"\n                                        className={errors.nome ? \"form-control is-invalid\" : \"form-control\"}\n                                        type=\"text\"\n                                        onChange={handleChange}\n                                        ref={register({\n                                            required: {\n                                                value: \"Required\",\n                                                message: \"O nome do estabelecimento é obrigatório\"\n                                            },\n                                        })}\n                                    />\n                                    <span className=\"error invalid-feedback\">{errors.nome && errors.nome.message}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"row\">\n                                <div className=\"mb-3 col-md-10\">\n                                    <input\n                                        name=\"endereco\"\n                                        placeholder=\"Endereço\"\n                                        className={errors.endereco ? \"form-control is-invalid\" : \"form-control\"}\n                                        type=\"text\"\n                                        onChange={handleChange}\n                                        ref={register({\n                                            required: {\n                                                value: \"Required\",\n                                                message: \"O endereço é obrigatório\"\n                                            }\n                                        })}\n                                    />\n                                    <span className=\"error invalid-feedback\">{errors.endereco && errors.endereco.message}</span>\n                                </div>\n                                <div className=\"mb-3 col-md-2\">\n                                    <input\n                                        name=\"numero\"\n                                        placeholder=\"Nº\"\n                                        className={errors.numero ? \"form-control is-invalid\" : \"form-control\"}\n                                        type=\"text\"\n                                        onChange={handleChange}\n                                        ref={register({\n                                            required: {\n                                                value: \"Required\",\n                                                message: \"O número é obrigatório\"\n                                            },\n                                            maxLength: {\n                                                value: 5,\n                                                message: \"Limite de 5 caracteres\"\n                                            }\n                                        })}\n                                    />\n                                    <span className=\"error invalid-feedback\">{errors.numero && errors.numero.message}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"row\">\n                                <div className=\"mb-3 col-md-12\">\n                                    <InputMask\n                                        type=\"text\"\n                                        placeholder=\"CNPJ\"\n                                        className={errors.cnpj ? \"form-control is-invalid\" : \"form-control\"}\n                                        name=\"cnpj\"\n                                        onChange={handleChange}\n                                        mask=\"99.999.999/9999-99\"\n                                        ref={register({\n                                            required: {\n                                                value: \"Required\",\n                                                message: \"O CNPJ é obrigatório\"\n                                            },\n                                            pattern: {\n                                                value: /^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/,\n                                                message: \"CNPJ inválido\"\n                                            }\n                                        })}\n                                    />\n                                    <span className=\"error invalid-feedback\">{errors.cnpj && errors.cnpj.message}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"row\">\n                                <div className=\"mb-3 col-md-12\">\n                                    <select\n                                        className={errors.tipoEstabelecimento ? \"form-control is-invalid\" : \"form-control\"}\n                                        onChange={handleChange}\n                                        name=\"tipoEstabelecimento\"\n                                        ref={register({\n                                            required: {\n                                                value: \"Required\",\n                                                message: \"O tipo de estabelecimento é obrigatório\"\n                                            },\n                                        })}\n                                    >\n                                        <option key={0} value={\"\"}>Tipo de estabelecimento</option>\n\n                                        {tiposEstabelecimento.map((tipoEstabelecimento, index) => (\n                                            <option key={tipoEstabelecimento.id} value={tipoEstabelecimento.id}>{tipoEstabelecimento.descricao}</option>\n                                        ))}\n                                    </select>\n                                    <span className=\"error invalid-feedback\">{errors.tipoEstabelecimento && errors.tipoEstabelecimento.message}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"row\">\n                                <div className=\"mb-3 col-md-6\">\n                                    <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        placeholder=\"Latitude\"\n                                        name=\"latitude\"\n                                        onChange={handleChange}\n                                    />\n                                </div>\n                                <div className=\"mb-3 col-md-6\">\n                                    <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        placeholder=\"Longitude\"\n                                        name=\"longitude\"\n                                        onChange={handleChange}\n                                    />\n                                </div>\n                            </div>\n\n                            <div className=\"row\">\n                                <div className=\"mb-3 col-md-12\">\n                                    <input\n                                        type=\"password\"\n                                        className={errors.senha ? \"form-control is-invalid\" : \"form-control\"}\n                                        placeholder=\"Senha\"\n                                        name=\"senha\"\n                                        onChange={handleChange}\n                                        ref={register({\n                                            required: {\n                                                value: \"Required\",\n                                                message: \"A senha é obrigatória\"\n                                            },\n                                            pattern: {\n                                                value: /(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/, // Mínimo de oito caracteres, pelo menos uma letra e um número\n                                                message: \"Mínimo de oito caracteres, com pelo menos uma letra e um número\"\n                                            }\n                                        })}\n                                    />\n                                    <span className=\"error invalid-feedback\">{errors.senha && errors.senha.message}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"row\">\n                                <div className=\"mb-3 col-md-12\">\n                                    <input\n                                        type=\"password\"\n                                        className={errors.repeticaoSenha ? \"form-control is-invalid\" : \"form-control\"}\n                                        placeholder=\"Redigite a senha\"\n                                        name=\"repeticaoSenha\"\n                                        onChange={handleChange}\n                                        ref={register({\n                                            required: {\n                                                value: \"Required\",\n                                                message: \"A repetição de senha é obrigatória\"\n                                            },\n                                            validate: value => value === watch('senha') || \"As senhas não coincidem\"\n                                        })}\n                                    />\n                                    <span className=\"error invalid-feedback\">{errors.repeticaoSenha && errors.repeticaoSenha.message}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"row mb-3\">\n                                <div className=\"col-12\">\n                                    <div className=\"icheck-primary\">\n                                        <input\n                                            className={errors.aceitaTermos ? \"\" : \"\"}\n                                            type=\"checkbox\"\n                                            defaultChecked={false}\n                                            name=\"aceitaTermos\"\n                                            defaultValue\n                                            ref={register({\n                                                required: {\n                                                    value: \"Required\",\n                                                    message: \"Aceite os termos para continuar\"\n                                                },\n                                            })}\n                                        />\n                                        <label htmlFor=\"agreeTerms\">\n                                            &nbsp;&nbsp;Eu aceito todos os <a data-toggle=\"modal\" data-target=\"#modaltermo\" href=\"#\">termos de uso</a>\n                                        </label>\n                                        <span className=\"error invalid-feedback\" style={{ display: \"inline\" }}><br />{errors.aceitaTermos && errors.aceitaTermos.message}</span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"row\">\n                                <div className=\"mb-2 col-12\">\n                                    <button type=\"submit\" className=\"btn btn-primary btn-block\">Cadastrar</button>\n                                </div>\n                            </div>\n\n                        </form>\n\n                        <a href=\"/\" className=\"text-center\">Já tenho uma conta de acesso</a>\n                    </div>\n                    {/* /.form-box */}\n                </div>{/* /.card */}\n            </div>\n            {/* /.register-box */}\n\n\n            <div className=\"modal fade\" id=\"modaltermo\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLongTitle\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\" role=\"document\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"exampleModalLongTitle\">Termo de Uso</h5>\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">×</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            A política de privacidade é o documento por meio do qual a pessoa física ou jurídica que mantém um site ou aplicativo expõe e explica a todos os interessados a forma como os dados pessoais dos usuários da plataforma serão tratados.\n                            A proteção de dados pessoais ganhou especial relevância após a entrada em vigor do Regulamento Geral de Proteção de Dados da União Europeia (RGPD), também conhecido como General Data Protection Regulation (GDPR), que é o regulamento adotado pelos países da União Europeia sobre o assunto. Esta norma estabeleceu uma série de exigências e de punições àqueles que realizam o tratamento de dados pessoais de usuários da internet.\n                            A adoção do RGPD pela União Europeia levou o Brasil a adotar uma legislação muito semelhante, que também trata do assunto: a Lei Federal n. 13.709 (Lei de Proteção de Dados Pessoais).\n                            Vale ressaltar, neste ponto, que, ainda que a pessoa física ou jurídica responsável pelo site ou aplicativo seja brasileira, é possível que se lhe apliquem ambas as normas, a depender do caso.\n                            As duas normas estabelecem regras que devem ser seguidas pelos sites ou aplicativos que fazem a coleta e o tratamento de dados pessoais de seus usuários. Além disso, os usuários deverão ter seus direitos respeitados, como os de acesso, limitação, eliminação, retificação e portabilidade de seus dados pessoais.\n                            O site ou aplicativo deverá informar os motivos pelos quais os dados pessoais de seus usuários são coletados, a pessoa responsável pelo tratamento destes dados e o prazo pelo qual são armazenados. Caberá ao site ou aplicativo, ainda, informar aos usuários os seus direitos, sendo que todas estas informações estarão previstas na política de privacidade.\n                            No documento, será necessário, ainda, designar um profissional especializado em privacidade para verificar se o site ou aplicativo está cumprindo as normas do regulamento, o chamado Encarregado de Proteção de Dados (Data Protection Officer).\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Fechar</button>\n                            <button type=\"button\" className=\"btn btn-primary\">Aceito</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {isLoadingVisible ? <Loading /> : null}\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}